<script>
  const form = document.getElementById('msgForm');
  form.onsubmit = async (e) => {
    e.preventDefault();
    const mensaje = document.getElementById('mensaje').value;
    document.getElementById('respuesta').textContent = "Analizando...";

    try {
      const res = await fetch('/api/mensaje', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message: mensaje })
      });

      const data = await res.json();
      document.getElementById('respuesta').textContent = data.evaluacion || "Respuesta no disponible.";
    } catch (err) {
      document.getElementById('respuesta').textContent = "Error al conectar con el servidor.";
    }
  }
</script>
